(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-server-tomcat-index"],{1827:function(n,t,r){var a=r("24fb");t=a(!1),t.push([n.i,"\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n/* 全局容器 */.app-container[data-v-2acc3934]{padding:15px;background-color:#f5f5f5;min-height:100vh;box-sizing:border-box}\r\n/* 卡片容器 */.status-card[data-v-2acc3934]{background-color:#fff;border-radius:12px;box-shadow:0 2px 8px rgba(0,0,0,.08);padding:20px 15px;margin-bottom:15px}\r\n/* 头部区域 */.status-header[data-v-2acc3934]{display:flex;justify-content:space-between;align-items:center;margin-bottom:20px;padding-bottom:15px;border-bottom:1px solid #f5f5f5}.status-header .title[data-v-2acc3934]{font-size:18px;font-weight:600;color:#1f2d3d}\r\n/* 刷新容器 */.refresh-container[data-v-2acc3934]{display:flex;align-items:center;gap:8px}\r\n/* 刷新按钮 */.refresh-btn[data-v-2acc3934]{display:flex;align-items:center;justify-content:center;padding:4px 8px;background:transparent;border:none;color:#409eff;font-size:12px}.refresh-btn .btn-text[data-v-2acc3934]{margin-left:4px}\r\n/* 刷新时间 */.refresh-time[data-v-2acc3934]{font-size:11px;color:#8392a5}\r\n/* 状态内容区 */.status-content[data-v-2acc3934]{display:flex;align-items:center;margin-bottom:20px;flex-wrap:wrap}\r\n/* 状态指示器 */.status-indicator[data-v-2acc3934]{display:flex;align-items:center;margin-right:20px;margin-bottom:15px}\r\n/* 状态圆点 */.indicator-dot[data-v-2acc3934]{width:14px;height:14px;border-radius:50%;margin-right:8px;transition:all .3s ease}.indicator-dot.running[data-v-2acc3934]{background-color:#52c41a;box-shadow:0 0 8px rgba(82,196,26,.4)}.indicator-dot.stopped[data-v-2acc3934]{background-color:#f5222d;box-shadow:0 0 8px rgba(245,34,45,.4)}\r\n/* 状态文字 */.status-text[data-v-2acc3934]{font-size:22px;font-weight:500;color:#1f2d3d}\r\n/* 操作按钮区 */.operation-buttons[data-v-2acc3934]{display:flex;gap:10px;width:100%}\r\n/* 通用按钮样式 */.btn[data-v-2acc3934]{flex:1;height:44px;border-radius:8px;display:flex;align-items:center;justify-content:center;border:none;font-size:14px}\r\n/* 启动按钮 */.start-btn[data-v-2acc3934]{background-color:#52c41a;color:#fff}.start-btn[data-v-2acc3934]:disabled{background-color:#af8;color:#fff;opacity:.7}\r\n/* 停止按钮 */.stop-btn[data-v-2acc3934]{background-color:#f5222d;color:#fff}.stop-btn[data-v-2acc3934]:disabled{background-color:#f88;color:#fff;opacity:.7}.btn .btn-text[data-v-2acc3934]{margin-left:6px}\r\n/* 日志区域 */.status-log[data-v-2acc3934]{margin-top:15px;padding:15px;background-color:#f5f7fa;border-radius:8px}\r\n/* 日志标题 */.log-title[data-v-2acc3934]{font-size:14px;color:#4e5969;font-weight:500;display:block;margin-bottom:10px}\r\n/* 日志内容 */.log-content[data-v-2acc3934]{padding:10px;background-color:#1f2d3d;border-radius:6px;max-height:200px;overflow-y:auto}\r\n/* 日志文字 */.log-text[data-v-2acc3934]{font-size:12px;color:#e0e0e0;line-height:1.6;white-space:pre-wrap}",""]),n.exports=t},"4ad2":function(n,t,r){"use strict";r("7a82"),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,r("d3b7"),r("99af");var a=r("db41"),e={name:"TomcatManager",data:function(){return{status:"加载中...",lastRefreshTime:"",logInfo:"",isOperating:!1,refreshInterval:null,isRefreshing:!1}},onLoad:function(){var n=this;this.queryStatus(),this.refreshInterval=setInterval((function(){n.queryStatus()}),1e4)},onUnload:function(){this.refreshInterval&&clearInterval(this.refreshInterval)},methods:{handleRefresh:function(){var n=this;this.isRefreshing=!0,this.queryStatus().finally((function(){n.isRefreshing=!1}))},queryStatus:function(){var n=this;return new Promise((function(t,r){(0,a.getTomcatStatus)().then((function(r){n.status=r.data,n.lastRefreshTime=n.formatDateTime(new Date),t()})).catch((function(t){uni.showToast({title:"查询状态失败: "+(t.msg||t.message),icon:"none",duration:2e3}),n.status="未知",r(t)}))}))},startTomcat:function(){var n=this;uni.showModal({title:"提示",content:"确定要启动Tomcat服务吗？",confirmText:"确定",cancelText:"取消",success:function(t){t.confirm?(n.isOperating=!0,n.logInfo="正在启动Tomcat服务...",(0,a.startTomcat)().then((function(t){uni.showToast({title:t.msg,icon:"success",duration:2e3}),n.logInfo=t.data||t.msg,setTimeout((function(){n.queryStatus(),setTimeout((function(){n.queryStatus(),n.isOperating=!1}),3e3)}),1e3)})).catch((function(t){uni.showToast({title:t.msg||"启动失败",icon:"none",duration:2e3}),n.logInfo=t.msg||"启动失败",n.isOperating=!1,n.queryStatus()}))):uni.showToast({title:"已取消启动",icon:"none",duration:2e3})}})},stopTomcat:function(){var n=this;uni.showModal({title:"警告",content:"确定要停止Tomcat服务吗？停止后可能导致相关应用无法访问。",confirmText:"确定",cancelText:"取消",success:function(t){t.confirm?(n.isOperating=!0,n.logInfo="正在停止Tomcat服务...",(0,a.stopTomcat)().then((function(t){uni.showToast({title:t.msg,icon:"success",duration:2e3}),n.logInfo=t.data||t.msg,setTimeout((function(){n.queryStatus(),setTimeout((function(){n.queryStatus(),n.isOperating=!1}),3e3)}),1e3)})).catch((function(t){uni.showToast({title:t.msg||"停止失败",icon:"none",duration:2e3}),n.logInfo=t.msg||"停止失败",n.isOperating=!1,n.queryStatus()}))):uni.showToast({title:"已取消停止",icon:"none",duration:2e3})}})},formatDateTime:function(n){var t=n.getFullYear(),r=this.padZero(n.getMonth()+1),a=this.padZero(n.getDate()),e=this.padZero(n.getHours()),o=this.padZero(n.getMinutes()),s=this.padZero(n.getSeconds());return"".concat(t,"-").concat(r,"-").concat(a," ").concat(e,":").concat(o,":").concat(s)},padZero:function(n){return n<10?"0".concat(n):n}}};t.default=e},"7a2d":function(n,t,r){var a=r("1827");a.__esModule&&(a=a.default),"string"===typeof a&&(a=[[n.i,a,""]]),a.locals&&(n.exports=a.locals);var e=r("4f06").default;e("712aa045",a,!0,{sourceMap:!1,shadowMode:!1})},adca:function(n,t,r){"use strict";r.r(t);var a=r("b8d1"),e=r("bd73");for(var o in e)["default"].indexOf(o)<0&&function(n){r.d(t,n,(function(){return e[n]}))}(o);r("f3b3");var s=r("f0c5"),i=Object(s["a"])(e["default"],a["b"],a["c"],!1,null,"2acc3934",null,!1,a["a"],void 0);t["default"]=i.exports},b8d1:function(n,t,r){"use strict";r.d(t,"b",(function(){return e})),r.d(t,"c",(function(){return o})),r.d(t,"a",(function(){return a}));var a={uniIcons:r("b540").default},e=function(){var n=this,t=n.$createElement,r=n._self._c||t;return r("v-uni-view",{staticClass:"app-container"},[r("v-uni-view",{staticClass:"status-card"},[r("v-uni-view",{staticClass:"status-header"},[r("v-uni-view",{staticClass:"refresh-container"},[r("v-uni-button",{staticClass:"refresh-btn",attrs:{loading:n.isRefreshing},on:{click:function(t){arguments[0]=t=n.$handleEvent(t),n.handleRefresh.apply(void 0,arguments)}}},[r("uni-icons",{attrs:{type:"refresh",size:"16",color:"#409eff"}}),r("v-uni-text",{staticClass:"btn-text"},[n._v("手动刷新")])],1),r("v-uni-text",{staticClass:"refresh-time"},[n._v("最后刷新: "+n._s(n.lastRefreshTime))])],1)],1),r("v-uni-view",{staticClass:"status-content"},[r("v-uni-view",{staticClass:"status-indicator"},[r("v-uni-view",{staticClass:"indicator-dot",class:"运行中"===n.status?"running":"stopped"}),r("v-uni-text",{staticClass:"status-text"},[n._v(n._s(n.status))])],1),r("v-uni-view",{staticClass:"operation-buttons"},[r("v-uni-button",{staticClass:"btn start-btn",attrs:{disabled:"运行中"===n.status||n.isOperating,loading:n.isOperating&&"运行中"!==n.status},on:{click:function(t){arguments[0]=t=n.$handleEvent(t),n.startTomcat.apply(void 0,arguments)}}},[r("uni-icons",{attrs:{type:"play",size:"14",color:"#fff"}}),r("v-uni-text",{staticClass:"btn-text"},[n._v("启动服务")])],1),r("v-uni-button",{staticClass:"btn stop-btn",attrs:{disabled:"已停止"===n.status||n.isOperating,loading:n.isOperating&&"已停止"!==n.status},on:{click:function(t){arguments[0]=t=n.$handleEvent(t),n.stopTomcat.apply(void 0,arguments)}}},[r("uni-icons",{attrs:{type:"stop",size:"14",color:"#fff"}}),r("v-uni-text",{staticClass:"btn-text"},[n._v("停止服务")])],1)],1)],1),n.logInfo?r("v-uni-view",{staticClass:"status-log"},[r("v-uni-text",{staticClass:"log-title"},[n._v("操作日志")]),r("v-uni-view",{staticClass:"log-content"},[r("v-uni-text",{staticClass:"log-text"},[n._v(n._s(n.logInfo))])],1)],1):n._e()],1)],1)},o=[]},bd73:function(n,t,r){"use strict";r.r(t);var a=r("4ad2"),e=r.n(a);for(var o in a)["default"].indexOf(o)<0&&function(n){r.d(t,n,(function(){return a[n]}))}(o);t["default"]=e.a},db41:function(n,t,r){"use strict";r("7a82");var a=r("4ea4").default;Object.defineProperty(t,"__esModule",{value:!0}),t.getTomcatStatus=function(){return(0,e.default)({url:"/server/tomcat/status",method:"get"})},t.startTomcat=function(){return(0,e.default)({url:"/server/tomcat/start",method:"post"})},t.stopTomcat=function(){return(0,e.default)({url:"/server/tomcat/stop",method:"post"})};var e=a(r("e3d7"))},f3b3:function(n,t,r){"use strict";var a=r("7a2d"),e=r.n(a);e.a}}]);